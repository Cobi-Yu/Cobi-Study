# Javascript 예외처리
에러를 효과적으로 디버깅 할 수 있도록 해주는 자바스크립트의 예외처리
- 다른언어와 비슷한 syntax인 try catch로 에러 핸들링이 가능하다.
- 논리적인 오류를 포함하여 의도적으로 사용자가 내는 오류 까지 핸들링 가능하다.
- 경우 

## 논리적 오류로 인한 예외발생
```js
function myFunc()
{
	var a = 100;
	var b = 0;
	
	try{
		testFunction();

	}catch ( e ) {
		alert("Error: " + e.message );
	}
}
```

```
결과 alert 
testFunction is not defined 
```
 


## 객체 리터럴을 이용한 사용자 정의 예외발생
- name : 에러명
- meessage : 에러객체애 전달할 메세지 
- remedy : 에러를 핸들링할 함수

```js
function myFunc()
{
	var a = 100;
	var b = 0;	
	try{
		throw{
			name : "MyError",
			message : "Wow",
			remedy : errorHandler
		};
	} catch ( e ) {
		alert("Error: " + e.message );
		e.remedy();
	}
}
function errorHandler(){
	alert('errorHandler');
}
```
```
결과 alert
Error : Wow      
errorHandler
```


# 함수 호이스팅
- var foo = function(){}의 함수선언은 함수 표현식이라 한다.
- function foo (){}의 함수선언은 기명 함수 표현식이라 한다.


~~~javascript
function foo(){
	alert('global foo');
}	
function bar(){
	alert('global bar');
}
function hoistMe(){
	foo();	//global foo
	bar();	// bar is undefined
	function foo (){
		alert('local foo');
	}
	var bar = function(){
		alert('local bar');
	}
}
hoistMe();
~~~
bar는 내부에서 함수 표현식으로 인해 변수는 호이스팅되서 최상단으로 올라가면서 전역함수 bar를 무효화한다.
하지만 무기명 function은 호이스팅 되지 않기떄문에 undefined 에러가 발생한다.
~~~
결과 alert
global foo
~~~




























## 기본 예제
```js
function showName(firstName, lastName) {
    var intro = "이름은 ";
    function fullName() {
        // 외부함수 변수뿐만 아니고 파라미터도 사용 가능
        return intro + firstName + lastName;
    }
    return fullName();
}

showName("유림", "진");
```

```js
$(function() {
    var selections = [];
    $(".yoolmoo").click(function() { // 이 클로저는 selections 변수에 접근합니다.
        selections.push(this.prop("name")); // 외부 함수의 selections 변수를 갱신함
    });
});
```

## 클로저 활용
```js
function userID() {
    var userID = 999;
    return {
        getID: function() {
            // 갱신된 userID를 리턴
            return userID;
        },
        setID: function(newID) {
            UserID = newID;
        }
    }
}

var myID = userID(); // 이 때, userID 외부 함수가 리턴됨
myID.getID(); // 999
myID.setID(567);
myID.getID(); // 567

```

## 클로저 헷갈려라
```js
function userID(userList) {
    var i; // 외부함수의 변수가 for문에 의해 변경됨
    var uniqueID = 100;
    for(i=0; i<userList.length; i++) {
        userList[i]["id"] = function() {
            // 이 내부 익명함수 클로저는 최종 갱신된 변수 i(3)에만 접근가능하다
            // 이게 실행될 시점에 i는 3이다
            return uniqueID + i;
        }
    }
    return userList;
}

var userList = [{name:"율무", id:0}, {name:"연우", id:0}, {name:"다정", id:0}];
var userIDCreated = userID(userList);

var yoolmooID = userIDCreated[0]; // 이때 내부함수 호출
console.log(yoolmooID.id); //101을 원했는데 103나옴 [103, 103, 103]
```

```js
function userID(userList) {
    var i; // 외부함수의 변수가 for문에 의해 변경됨
    var uniqueID = 100;
    for(i=0; i<userList.length; i++) {
        userList[i]["id"] = function(j) {
            // 이 내부 익명함수 클로저는 최종 갱신된 변수 i(3)에만 접근가능하다
            // 이게 실행될 시점에 i는 3이다
            return function() {
                return uniqueID + j;
            }() //함수 리턴 대신 즉시 실행
        }(i); //i변수를 파라미터로 즉시 함수호출
    }
    return userList;
}
```

## Refer
http://chanlee.github.io/2013/12/10/understand-javascript-closure/


## HTTP
- Hypertext transfer protocol
- 월드 와이드 웹의 주요 프로토콜
- 브라우저는 사실 HTTP 클라이언트라고 할 수 있다. (페이지를 제공하는 서버는 HTTP 서버)
- Ajax는 HTTP 프로토콜 이용해서 서버로 요청을 보냄. 그 형식을 구성해서 보내야 함. 

### HTTP 요청
특정 서버에 연결이 이루어지면, HTTP 클라이언트는 다음 형식으로 요청 보냄 
- 시작 줄
    + 3개 부분. 메서드명(어떤 명령 요구할건지) / 서버 자원 경로 정보 / HTTP 프로토콜 버전
    + `GET /testpage.html HTTP/1.0`
- 헤더 정보(생략 가능)
    + 지금 보내는 요청에 대한 정보 / 본문의 내용에 대한 정보. Key-Value쌍이 콜론으로 구분되어 한 줄씩 차지함.
    + `User-Agent: Mozilla/4.0`
    + `Accept: text/plain, text/html` # 서버로부터 오는 응답 중에서 어떤 종류의 정보를 받겠다. 서버에게 지금 요청을 내린 프로그램이 받아들일 수 있는것이 일반 텍스트와 HTML응답이다. (비디오, 오디오 등은 안 받음)
- 빈칸
- 본문 메세지(생략 가능)

### HTTP 응답
- 시작 줄: 상태
    + 앞에(HTTP Request에서 보내주었던) HTTP버전 / 3개의 숫자로 이루어진 상태 값 / 그 상태에 대한 짧은 설명 문자열
    + `HTTP/1.0 200 OK`
- 헤더 정보
    + key-value 쌍. 서버에 대한 정보나 서버가 보내는 내용에 대한 정보.

#### 참고: 일반적인 상태 코드
- 1**: 정보
- 2**: 성공
    + 200 ok: 요청 성공적 수행
    + 204 No Content: 요청한 문서에 내용이 없음
- 3**: 리다이렉트
    + 301 Moved Permanently: 요청한 자원이 다른 주소로 이동되었음
- 4**: 클라이언트 에러
    + 401 Not Authorized: 권한 없음
    + 403 Forbidden: 서버가 요청을 거부하였음
    + 408 Request Timeout: 클라이언트가 서버가 지정한 타임아웃 시간 내에 응답을 보내지 않음
- 5**
    + 500 Server Error: 비정상적인 스크립트로 인해 서버 설정에 에러 등등
